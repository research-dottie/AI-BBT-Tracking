<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸºç¤é«”æº«è¿½è¹¤å·¥å…·</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .chart-container {
            margin: 40px 0 20px 0;
            height: 450px;
            position: relative;
            border: 1px solid #eee;
            padding: 20px;
            border-radius: 8px;
        }

        .analysis {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .phase-section {
            margin: 15px 0;
            padding: 10px;
            border-radius: 5px;
        }

        .phase-menstrual { background-color: rgba(255, 182, 193, 0.2); }
        .phase-follicular { background-color: rgba(255, 228, 225, 0.2); }
        .phase-ovulation { background-color: rgba(230, 230, 250, 0.2); }
        .phase-ovulation2 { background-color: rgba(147, 112, 219, 0.2); }
        .phase-luteal { background-color: rgba(221, 160, 221, 0.2); }
        .phase-unknown { background-color: rgba(200, 200, 200, 0.2); }

        h2 {
            color: #333;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        h3 {
            color: #666;
            margin-bottom: 10px;
        }

        .note {
            margin-top: 15px;
            padding: 10px;
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
        }

        ul {
            margin: 5px 0;
            padding-left: 20px;
        }

        li {
            margin-bottom: 5px;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="chart-container">
            <canvas id="bbtChart"></canvas>
        </div>

        <div class="analysis">
            <h2>é€±æœŸéšæ®µåˆ†æ</h2>
            
            <div class="phase-section phase-menstrual">
                <h3>ğŸŒ¸ æœˆç¶“æœŸ (10/28-10/31)</h3>
                <ul>
                    <li>é€±æœŸèµ·å§‹æ—¥æœŸï¼š10/28ï¼ˆç¬¬ä¸€å¤©ï¼‰</li>
                    <li>æŒçºŒå¤©æ•¸ï¼š4å¤©</li>
                    <li>é«”æº«ç‰¹å¾µï¼šä¸ç©©å®šï¼Œæœ‰èµ·ä¼ï¼ˆ35.10-35.70Â°Cï¼‰</li>
                </ul>
            </div>

            <div class="phase-section phase-follicular">
                <h3>ğŸŒ± åµæ³¡æœŸ (11/2-11/8)</h3>
                <ul>
                    <li>æŒçºŒå¤©æ•¸ï¼š7å¤©</li>
                    <li>é«”æº«ç‰¹å¾µï¼šç›¸å°ç©©å®šåœ¨ä½æº«æ°´å¹³ï¼ˆ35.02-35.34Â°Cï¼‰</li>
                    <li>åˆ¤æ–·ä¾æ“šï¼šæœˆç¶“çµæŸå¾Œé«”æº«ç¶­æŒä½æº«å¹³å°</li>
                </ul>
            </div>

            <div class="phase-section phase-ovulation">
                <h3>â­ å¯èƒ½æ’åµæœŸä¸€ (11/9)</h3>
                <ul>
                    <li>é«”æº«ç‰¹å¾µï¼šå‡ºç¾ä½æº«é»ï¼ˆ35.07Â°Cï¼‰</li>
                    <li>åˆ¤æ–·ä¾æ“šï¼šé«”æº«ä¸‹é™å¾Œéš”å¤©ä¸Šå‡</li>
                    <li>æº«å·®è®ŠåŒ–ï¼šä¸Šå‡0.36Â°C</li>
                </ul>
            </div>

            <div class="phase-section phase-luteal">
                <h3>ğŸŒ™ é«˜æº«æœŸ (11/10-11/16)</h3>
                <ul>
                    <li>æŒçºŒå¤©æ•¸ï¼š7å¤©</li>
                    <li>é«”æº«ç‰¹å¾µï¼šç¶­æŒåœ¨è¼ƒé«˜æ°´å¹³ï¼ˆ35.42-35.51Â°Cï¼‰</li>
                </ul>
            </div>

            <div class="phase-section phase-ovulation2">
                <h3>â­ å¯èƒ½æ’åµæœŸäºŒ (11/17-11/18)</h3>
                <ul>
                    <li>é«”æº«ç‰¹å¾µï¼šæ˜é¡¯çš„æº«åº¦é©Ÿé™ï¼ˆ34.89Â°Cï¼‰</li>
                    <li>åˆ¤æ–·ä¾æ“šï¼šå‡ºç¾æ›´æ˜é¡¯çš„æº«é™å’Œå›å‡</li>
                    <li>æº«å·®è®ŠåŒ–ï¼šé™æº«0.73Â°Cï¼Œå¾ŒçºŒä¸Šå‡0.69Â°C</li>
                    <li>ç‰¹æ®Šç¾è±¡ï¼šæº«å·®æ¯”ç¬¬ä¸€æ¬¡æ›´æ˜é¡¯</li>
                </ul>
            </div>

            <div class="phase-section phase-unknown">
                <h3>ğŸ“ å¾…ç¢ºèªæœŸ (11/19-11/20)</h3>
                <ul>
                    <li>11/19ï¼šé«”æº«ä¸Šå‡è‡³35.58Â°C</li>
                    <li>11/20ï¼šé«”æº«ä¸‹é™è‡³35.24Â°Cï¼ˆé™å¹…0.34Â°Cï¼‰</li>
                    <li>ç‰¹é»ï¼šé«”æº«ä»æœ‰æ³¢å‹•ï¼Œéœ€æŒçºŒè§€å¯Ÿ</li>
                </ul>
            </div>

            <div class="note">
                <strong>ç‰¹åˆ¥èªªæ˜ï¼š</strong>
                <ul>
                    <li>æœ¬é€±æœŸå‡ºç¾å…©æ¬¡å¯èƒ½çš„æ’åµå¾µè±¡</li>
                    <li>ç¬¬äºŒæ¬¡æº«åº¦è®ŠåŒ–ï¼ˆ11/17-11/18ï¼‰æ›´åŠ æ˜é¡¯</li>
                    <li>æœ€æ–°è§€å¯Ÿï¼ˆ11/19-11/20ï¼‰ï¼š
                        <ul>
                            <li>é«”æº«æŒçºŒæ³¢å‹•</li>
                            <li>å»ºè­°æŒçºŒè§€å¯Ÿå…¶ä»–æ’åµå¾µè±¡</li>
                            <li>é—œæ³¨æ˜¯å¦å‡ºç¾æœˆç¶“å¾µå…†</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
<script>
    // åŸºç¤é«”æº«æ•¸æ“š
    const bbtData = [
        {date: "10/28", temp: 35.10, phase: "æœˆç¶“æœŸ"},
        {date: "10/30", temp: 35.70, phase: "æœˆç¶“æœŸ"},
        {date: "10/31", temp: 35.26, phase: "æœˆç¶“æœŸ"},
        {date: "11/2", temp: 35.44, phase: "åµæ³¡æœŸ"},
        {date: "11/3", temp: 35.21, phase: "åµæ³¡æœŸ"},
        {date: "11/4", temp: 35.34, phase: "åµæ³¡æœŸ"},
        {date: "11/5", temp: 35.81, phase: "åµæ³¡æœŸ"},
        {date: "11/6", temp: 35.05, phase: "åµæ³¡æœŸ"},
        {date: "11/7", temp: 35.02, phase: "åµæ³¡æœŸ"},
        {date: "11/8", temp: 35.15, phase: "åµæ³¡æœŸ"},
        {date: "11/9", temp: 35.07, phase: "æ’åµæœŸä¸€"},
        {date: "11/10", temp: 35.43, phase: "é«˜æº«æœŸ"},
        {date: "11/11", temp: 35.49, phase: "é«˜æº«æœŸ"},
        {date: "11/12", temp: 35.51, phase: "é«˜æº«æœŸ"},
        {date: "11/13", temp: 35.42, phase: "é«˜æº«æœŸ"},
        {date: "11/14", temp: 35.43, phase: "é«˜æº«æœŸ"},
        {date: "11/15", temp: 35.81, phase: "é«˜æº«æœŸ"},
        {date: "11/16", temp: 35.45, phase: "é«˜æº«æœŸ"},
        {date: "11/17", temp: 35.62, phase: "æ’åµæœŸäºŒ"},
        {date: "11/18", temp: 34.89, phase: "æ’åµæœŸäºŒ"},
        {date: "11/19", temp: 35.58, phase: "å¾…ç¢ºèª"},
        {date: "11/20", temp: 35.24, phase: "å¾…ç¢ºèª"}
    ];

    // åˆå§‹åŒ–åœ–è¡¨
    window.onload = function() {
        const ctx = document.getElementById('bbtChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: bbtData.map(d => d.date),
                datasets: [{
                    data: bbtData.map(d => d.temp),
                    borderColor: 'rgb(75, 192, 192)',
                    tension: 0.1,
                    fill: false,
                    pointRadius: 4,
                    pointBackgroundColor: 'white',
                    pointBorderColor: 'rgb(75, 192, 192)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                layout: {
                    padding: {
                        top: 30,
                        right: 20,
                        bottom: 10,
                        left: 20
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        min: 34.5,
                        max: 36,
                        ticks: {
                            stepSize: 0.25
                        }
                    },
                    x: {
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        }
                    }
                }
            },
            plugins: [{
                id: 'customBackgrounds',
                beforeDraw: (chart) => {
                    const ctx = chart.ctx;
                    const chartArea = chart.chartArea;
                    const xAxis = chart.scales.x;

                    // æœˆç¶“æœŸèƒŒæ™¯
                    const menstrualStart = xAxis.getPixelForValue('10/28');
                    const menstrualEnd = xAxis.getPixelForValue('10/31');
                    ctx.fillStyle = 'rgba(255, 182, 193, 0.2)';
                    ctx.fillRect(menstrualStart, chartArea.top, menstrualEnd - menstrualStart, chartArea.bottom - chartArea.top);

                    // åµæ³¡æœŸèƒŒæ™¯
                    const follicularStart = xAxis.getPixelForValue('11/2');
                    const follicularEnd = xAxis.getPixelForValue('11/8');
                    ctx.fillStyle = 'rgba(255, 228, 225, 0.2)';
                    ctx.fillRect(follicularStart, chartArea.top, follicularEnd - follicularStart, chartArea.bottom - chartArea.top);

                    // æ’åµæœŸä¸€èƒŒæ™¯
                    const ovulation1Start = xAxis.getPixelForValue('11/9');
                    const ovulation1End = xAxis.getPixelForValue('11/9');
                    ctx.fillStyle = 'rgba(230, 230, 250, 0.2)';
                    ctx.fillRect(ovulation1Start, chartArea.top, ovulation1End - ovulation1Start, chartArea.bottom - chartArea.top);

                    // é«˜æº«æœŸèƒŒæ™¯
                    const lutealStart = xAxis.getPixelForValue('11/10');
                    const lutealEnd = xAxis.getPixelForValue('11/16');
                    ctx.fillStyle = 'rgba(221, 160, 221, 0.2)';
                    ctx.fillRect(lutealStart, chartArea.top, lutealEnd - lutealStart, chartArea.bottom - chartArea.top);

                    // æ’åµæœŸäºŒèƒŒæ™¯
                    const ovulation2Start = xAxis.getPixelForValue('11/17');
                    const ovulation2End = xAxis.getPixelForValue('11/18');
                    ctx.fillStyle = 'rgba(147, 112, 219, 0.2)';
                    ctx.fillRect(ovulation2Start, chartArea.top, ovulation2End - ovulation2Start, chartArea.bottom - chartArea.top);

                    // å¾…ç¢ºèªæœŸèƒŒæ™¯
                    const unknownStart = xAxis.getPixelForValue('11/19');
                    const unknownEnd = xAxis.getPixelForValue('11/20');
                    ctx.fillStyle = 'rgba(200, 200, 200, 0.2)';
                    ctx.fillRect(unknownStart, chartArea.top, unknownEnd - unknownStart, chartArea.bottom - chartArea.top);
                }
            },
            {
                id: 'customLabels',
                afterDraw: (chart) => {
                    const ctx = chart.ctx;
                    const chartArea = chart.chartArea;
                    const xAxis = chart.scales.x;
                    
                    ctx.save();
                    ctx.font = 'bold 14px Arial';
                    ctx.textAlign = 'center';
                    
                    // æœˆç¶“æœŸæ¨™ç±¤
                    const menstrualStart = xAxis.getPixelForValue('10/28');
                    const menstrualEnd = xAxis.getPixelForValue('10/31');
                    ctx.fillStyle = '#FF69B4';
                    ctx.fillText('æœˆç¶“æœŸ', (menstrualStart + menstrualEnd) / 2, chartArea.top - 15);
                    
                    // åµæ³¡æœŸæ¨™ç±¤
                    const follicularStart = xAxis.getPixelForValue('11/2');
                    const follicularEnd = xAxis.getPixelForValue('11/8');
                    ctx.fillStyle = '#FFA07A';
                    ctx.fillText('åµæ³¡æœŸ', (follicularStart + follicularEnd) / 2, chartArea.top - 15);
                    
                    // æ’åµæœŸä¸€æ¨™ç±¤
                    const ovulation1Start = xAxis.getPixelForValue('11/9');
                    ctx.fillStyle = '#9370DB';
                    ctx.fillText('æ’åµæœŸä¸€', ovulation1Start, chartArea.top - 15);
                    
                    // é«˜æº«æœŸæ¨™ç±¤
                    const lutealStart = xAxis.getPixelForValue('11/10');
                    const lutealEnd = xAxis.getPixelForValue('11/16');
                    ctx.fillStyle = '#DDA0DD';
                    ctx.fillText('é«˜æº«æœŸ', (lutealStart + lutealEnd) / 2, chartArea.top - 15);

                    // æ’åµæœŸäºŒæ¨™ç±¤
                    const ovulation2Start = xAxis.getPixelForValue('11/17');
                    const ovulation2End = xAxis.getPixelForValue('11/18');
                    ctx.fillStyle = '#9370DB';
                    ctx.fillText('æ’åµæœŸäºŒ', (ovulation2Start + ovulation2End) / 2, chartArea.top - 15);

                    // å¾…ç¢ºèªæœŸæ¨™ç±¤
                    const unknownStart = xAxis.getPixelForValue('11/19');
                    const unknownEnd = xAxis.getPixelForValue('11/20');
                    ctx.fillStyle = '#666666';
                    ctx.fillText('å¾…ç¢ºèª', (unknownStart + unknownEnd) / 2, chartArea.top - 15);
                    
                    ctx.restore();
                }
            }]
        });
    };
</script>
</body>
</html>
